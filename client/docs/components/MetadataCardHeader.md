# Metadata Card Header

**Author:** Vitoriox

The header is a rather complex v-card which contains the most relevant information of the repository
analized such as description, license, title, icon, etc. If some metadata that must be in the header could
not be extracted, it will show (*NO DATA AVAILABLE*) on that field.

Inside the metadata card it will be used the following components: 
 - LastModifyChip
 - DownloadSelector
 
```html
    <metadata-card-header :logo="logo"
                          :title="title"
                          :stars="stars"
                          :description="description"
                          :last-modify="lastModify"
                          :last-release="lastRelease"
                          :total-releases="totalReleases"
                          :license="license"
                          :docker="docker"
                          :notebooks="notebooks"
                          :repo="repo"
                          @download="download"
    />
```

## Props

| Name                       | Type     | Default | Description |
|----------------------------|----------|---------|-------------|
| `title` *required*         | `String` | null    |             |
| `stars` *required*         | `Number` | null    |             |
| `lastRelease` *required*   | `String` | null    |             |
| `totalReleases` *required* | `Number` | null    |             |
| `description` *required*   | `String` | null    |             |
| `license` *required*       | `String` | null    |             |
| `lastModify` *required*    | `Date`   | null    |             |
| `docker` *required*        | `String` | null    |             |
| `repo` *required*          | `String` | null    |             |
| `notebooks` *required*     | `String` | null    |             |
| `logo` *required*          | `String` | null    |             |


## Data

| Name          | Type     | Initial value       | Description                                 |
|---------------|----------|---------------------|---------------------------------------------|
| `unavailable` | `String` | "NO DATA AVAILABLE" | Used when there is no data for a given prop |

## Methods

### generateTabs()

This method receive the JSON object with the metadata returned by SOMEF. Does not have output, but it 
initialises the two main parts of the metadata card (the header and the body) calling other methods

**Syntax**

```typescript
generateTabs(rawMetadata): void
```

### buildHeaderItem()
This method receive as an input the name of the header field and the metadata content associated to it. It is responsible
for initializing the `header` data variable.

This method will process the input different depending on the type of header field to be initialized

**Syntax**

```typescript
buildHeaderItem(name, somefItem)(): void
```

### buildPanelItem()
This method is similar to `buildHeaderItem`. Receives the name of the field name and de metadata object associated to build
the respective panel. It is responsible for initialize the `panelItemsList` data variable.

All the panel item objects generated by this method has this form:

    name: (String), // Name of the panel, it is the same as the input name
    body: (Array),  // Content of the panel, the content can be any data type, including another panel item objects
    confidence: (Number), // Confidence given by somef, only used if the body is NOT a list of panel items
    extractionMethods: (Set), // List of all the extracction methods used by somef to get this metadata

**Syntax**

```typescript
buildPanelItem(name, somefItem)(): void
```

### isHeaderItem()
Determines if a given field name is part of the header or not.
It uses the `METADATA_FIELDS_FOR_HEADER` constant as a list for comparison.
If the name of the field apears in that list, that means is part of the header, otherwise return false.

**Syntax**

```typescript
isHeaderItem(name)(): Boolean
```

### parseCitation()
Given a String input in bibtex notation, this method returns the HTML equivalent for that citation.

**Syntax**

```typescript
parseCitation(data)(): String (HTML format)
```

### downloadMetadata()
This method emits the `click-download` event with the String of the filetype given at the input.
It is used to notify the main component that the user wants to download the metadata file and the extension of it. 

**Syntax**

```typescript
downloadMetadata(fileType)(): void
```

### stringToTitleCase()
Converts any input string to the TitleCase format

**Syntax**

```typescript
stringToTitleCase(str)(): String
```

### excerptToString()
Converts the input excerpt to String. The excerpt is given by somef and can be any data type (Object, Array, String)

**Syntax**

```typescript
excerptToString(excerpt)(): String
```